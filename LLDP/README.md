CiscoDevNet3 / LLDP


Запуск: lldp.py [<ggraph_filename>]

  Указание файла опционально.  
  
	- Если файла не указан, то строится топология по LLDP и сохраняется в файле img/graph-*.png.	
	  При этом строится граф (GGraph) и сохраняется в файле graph/graph-*, откуда он может быть взят для сравнения топологий позже. 
	- Если файл при запуске указан, то это должен быть файл на сохраненную до этого топологию (GGraph-объект в каталоге graph/).	
	  В этом случае происходит сравнение текущей топологии с той, что находится в файле и результатом сравнения является картинка,  
	  сохраняемая в файле img/COMPARE--*.png. На картике вершины и ребра раскрашиваются в разные цвета, о чем описано ниже.
	  

Визуализация.

Для визуализации используется graphviz, т.к. оказалось, что networkx не поддерживает визуализацию мультиграфов.
При обычном построении топологии все верщины и ребра имеют синий цвет.

При сравнении топологии с сохраненной ранее, вершины и ребра раскрашиваются в 3 цвета:

	- синий - вершины/ребра общие (без изменений) для обеих топологий

	- красный - вершины/ребра, которые не присутствуют в текущей топологии, но присутствуют в той, с которой сравнивают

	- зеленый - вершины/ребра, которые присутствуют в текущей топологии, но отсутствуют в тойц, с которой сравнивают

	
Пиктограмма вершины (устройста) соответсвует типу этого устройста, полученному из LLDP-capabilities (L2/L3 switch, router, IP Phone w/switch, IP Phone w/o switch [ex. IP Conference station], Access point, Station [ex. Server])


Принцип работы.

Netmiko собирает LLDP-данные для каждого из устройств. По этим данным строится граф GGraph; вершины - устройства, ребра - LLDP-соседство.
При построении графа выделяется 2 типа вершин: DIRECT и INDIRECT.
DIRECT-вершина - вершина, построенная для данного устройства для LLDP-таблицы данного устройства.
INDIRECT-вершина - вершина, построенная для LLDP-соседа по LLDP-таблице данного устройства.
В ходе построения графа, INDIRECT-вершины заменяются DIRECT-вершинами с сохранением уже собранных данных.
При сравнении двух GGraph-объектов результатом будет третий GGraph-объект, представвляющий объединение первых двух,
но с аттрибутированными для визуализации и раскраски вершинами и ребрами.
